{"version":3,"sources":["../../../../pages/post/%5Bid%5D.jsx","../../../../node_modules/next/src/build/templates/pages.ts"],"sourcesContent":["import fs from 'fs';\nimport path from 'path';\nimport Head from 'next/head';\nimport Link from 'next/link';\nimport StatsChart from '../../components/StatsChart';\nimport dayjs from 'dayjs';\n\nexport default function ArticleDetail({ article, history, latestTimestamp }) {\n    if (!article) return <div className=\"container\" style={{ padding: 40 }}>Article not found.</div>;\n\n    return (\n        <div className=\"min-h-screen bg-gray-50\">\n            <Head>\n                <title>{article.title} - SSPAI Tracker</title>\n            </Head>\n\n            <main className=\"container\">\n                <div style={{ marginTop: 40, marginBottom: 20 }}>\n                    <Link href=\"/\" className=\"back-link\">\n                        ‚Üê Back to Dashboard\n                    </Link>\n                </div>\n\n                <header>\n                    <div>\n                        <span className=\"badge\">Article Analysis</span>\n                        <h1 style={{ marginTop: 12 }}>{article.title}</h1>\n                        <p className=\"subtitle\">\n                            ID: {article.id} ‚Ä¢ Published: {dayjs.unix(article.created_at).format('YYYY-MM-DD')} ‚Ä¢ Last Updated: {dayjs(latestTimestamp).format('HH:mm')}\n                        </p>\n                    </div>\n                    <a href={`https://sspai.com/post/${article.id}`} target=\"_blank\" className=\"article-link text-accent\">\n                        View on SSPAI ‚Üó\n                    </a>\n                </header>\n\n                {/* --- Key Metrics --- */}\n                <div className=\"grid\">\n                    <Card title=\"Total Views\" value={article.views} icon=\"üëÄ\" />\n                    <Card title=\"Total Likes\" value={article.likes} icon=\"‚ù§Ô∏è\" />\n                    <Card title=\"Total Comments\" value={article.comments} icon=\"üí¨\" />\n                </div>\n\n                {/* --- Charts --- */}\n                <h2 style={{ marginBottom: 16 }}>Growth Trends</h2>\n\n                <div className=\"section\">\n                    <div className=\"section-header\">\n                        <span className=\"card-title\">Views Growth</span>\n                        <span className=\"meta-text\">{history.length} data points</span>\n                    </div>\n                    <div style={{ padding: 24 }}>\n                        <StatsChart history={history} title=\"Views\" dataKey=\"views\" color=\"rgb(217, 48, 37)\" />\n                    </div>\n                </div>\n\n                <div className=\"grid\" style={{ gridTemplateColumns: '1fr 1fr', marginBottom: 40 }}>\n                    <div className=\"section\" style={{ marginBottom: 0 }}>\n                        <div className=\"section-header\">\n                            <span className=\"card-title\">Likes Growth</span>\n                        </div>\n                        <div style={{ padding: 24 }}>\n                            <StatsChart history={history} title=\"Likes\" dataKey=\"likes\" color=\"rgb(52, 199, 89)\" />\n                        </div>\n                    </div>\n                    <div className=\"section\" style={{ marginBottom: 0 }}>\n                        <div className=\"section-header\">\n                            <span className=\"card-title\">Comments Growth</span>\n                        </div>\n                        <div style={{ padding: 24 }}>\n                            <StatsChart history={history} title=\"Comments\" dataKey=\"comments\" color=\"rgb(0, 122, 255)\" />\n                        </div>\n                    </div>\n                </div>\n\n            </main>\n        </div>\n    );\n}\n\nfunction Card({ title, value, icon }) {\n    return (\n        <div className=\"card\">\n            <div className=\"card-content\">\n                <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n                    <span className=\"card-title\">{title}</span>\n                    <span style={{ fontSize: 20 }}>{icon}</span>\n                </div>\n                <p className=\"card-value\">{value ? value.toLocaleString() : 0}</p>\n            </div>\n        </div>\n    );\n}\n\nexport async function getStaticPaths() {\n    const dataDir = path.join(process.cwd(), 'data');\n    const historyPath = path.join(dataDir, 'history.json');\n    let history = [];\n    try {\n        history = JSON.parse(fs.readFileSync(historyPath, 'utf8'));\n    } catch (e) { }\n\n    // Get all unique article IDs from the LATEST snapshot (assuming it contains all)\n    const latest = history.length > 0 ? history[history.length - 1] : { articles: [] };\n    const paths = (latest.articles || []).map(article => ({\n        params: { id: article.id.toString() }\n    }));\n\n    return { paths, fallback: 'blocking' };\n}\n\nexport async function getStaticProps({ params }) {\n    const dataDir = path.join(process.cwd(), 'data');\n    const historyPath = path.join(dataDir, 'history.json');\n    let history = [];\n    try {\n        history = JSON.parse(fs.readFileSync(historyPath, 'utf8'));\n    } catch (e) { }\n\n    const articleId = parseInt(params.id);\n\n    // 1. Find latest metadata for this article\n    const latestSnapshot = history.length > 0 ? history[history.length - 1] : {};\n    const article = (latestSnapshot.articles || []).find(a => a.id === articleId) || null;\n\n    // 2. Build history for this specific article\n    // We iterate through ALL history snapshots and extract data for this articleId\n    const articleHistory = history.map(snapshot => {\n        const art = (snapshot.articles || []).find(a => a.id === articleId);\n        if (art) {\n            return {\n                timestamp: snapshot.timestamp,\n                views: art.views,\n                likes: art.likes,\n                comments: art.comments\n            };\n        }\n        return null;\n    }).filter(item => item !== null);\n\n    return {\n        props: {\n            article,\n            history: articleHistory,\n            latestTimestamp: latestSnapshot.timestamp || null\n        }\n    };\n}\n","import { PagesRouteModule } from '../../server/route-modules/pages/module.compiled'\nimport { RouteKind } from '../../server/route-kind'\n\nimport { hoist } from './helpers'\n\n// Import the app and document modules.\nimport * as document from 'VAR_MODULE_DOCUMENT'\nimport * as app from 'VAR_MODULE_APP'\n\n// Import the userland code.\nimport * as userland from 'VAR_USERLAND'\nimport { getHandler } from '../../server/route-modules/pages/pages-handler'\n\n// Re-export the component (should be the default export).\nexport default hoist(userland, 'default')\n\n// Re-export methods.\nexport const getStaticProps = hoist(userland, 'getStaticProps')\nexport const getStaticPaths = hoist(userland, 'getStaticPaths')\nexport const getServerSideProps = hoist(userland, 'getServerSideProps')\nexport const config = hoist(userland, 'config')\nexport const reportWebVitals = hoist(userland, 'reportWebVitals')\n\n// Re-export legacy methods.\nexport const unstable_getStaticProps = hoist(\n  userland,\n  'unstable_getStaticProps'\n)\nexport const unstable_getStaticPaths = hoist(\n  userland,\n  'unstable_getStaticPaths'\n)\nexport const unstable_getStaticParams = hoist(\n  userland,\n  'unstable_getStaticParams'\n)\nexport const unstable_getServerProps = hoist(\n  userland,\n  'unstable_getServerProps'\n)\nexport const unstable_getServerSideProps = hoist(\n  userland,\n  'unstable_getServerSideProps'\n)\n\n// Create and export the route module that will be consumed.\nexport const routeModule = new PagesRouteModule({\n  definition: {\n    kind: RouteKind.PAGES,\n    page: 'VAR_DEFINITION_PAGE',\n    pathname: 'VAR_DEFINITION_PATHNAME',\n    // The following aren't used in production.\n    bundlePath: '',\n    filename: '',\n  },\n  distDir: process.env.__NEXT_RELATIVE_DIST_DIR || '',\n  relativeProjectDir: process.env.__NEXT_RELATIVE_PROJECT_DIR || '',\n  components: {\n    // default export might not exist when optimized for data only\n    App: app.default,\n    Document: document.default,\n  },\n  userland,\n})\n\nexport const handler = getHandler({\n  srcPage: 'VAR_DEFINITION_PAGE',\n  config,\n  userland,\n  routeModule,\n  getStaticPaths,\n  getStaticProps,\n  getServerSideProps,\n})\n"],"names":["PagesRouteModule","RouteKind","hoist","document","app","userland","getHandler","getStaticProps","getStaticPaths","getServerSideProps","config","reportWebVitals","unstable_getStaticProps","unstable_getStaticPaths","unstable_getStaticParams","unstable_getServerProps","unstable_getServerSideProps","routeModule","definition","kind","PAGES","page","pathname","bundlePath","filename","distDir","process","env","__NEXT_RELATIVE_DIST_DIR","relativeProjectDir","__NEXT_RELATIVE_PROJECT_DIR","components","App","default","Document","handler","srcPage"],"mappings":"6DAAA,EAAA,EAAA,CAAA,CAAA,MACA,EAAA,EAAA,CAAA,CAAA,MACA,EAAA,EAAA,CAAA,CAAA,MACA,EAAA,EAAA,CAAA,CAAA,MACA,EAAA,EAAA,CAAA,CAAA,MACA,EAAA,EAAA,CAAA,CAAA,eAEe,SAAS,EAAc,SAAE,CAAO,SAAE,CAAO,iBAAE,CAAe,CAAE,SACvE,AAAK,EAGD,CAAA,CAHA,CAGA,EAAA,EAHU,EAGV,EAAC,MAAA,CAAI,UAAU,oCACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,UACD,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,WAAO,EAAQ,KAAK,CAAC,wBAG1B,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,sBACZ,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,MAAO,CAAE,UAAW,GAAI,aAAc,EAAG,WAC1C,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CAAC,KAAK,IAAI,UAAU,qBAAY,0BAKzC,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,WACG,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACG,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,iBAAQ,qBACxB,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,MAAO,CAAE,UAAW,EAAG,WAAI,EAAQ,KAAK,GAC5C,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,qBAAW,OACf,EAAQ,EAAE,CAAC,iBAAe,EAAA,OAAK,CAAC,IAAI,CAAC,EAAQ,UAAU,EAAE,MAAM,CAAC,cAAc,oBAAkB,CAAA,EAAA,EAAA,OAAA,AAAK,EAAC,GAAiB,MAAM,CAAC,eAG3I,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,KAAM,CAAC,uBAAuB,EAAE,EAAQ,EAAE,CAAA,CAAE,CAAE,OAAO,SAAS,UAAU,oCAA2B,uBAM1G,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iBACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAK,MAAM,cAAc,MAAO,EAAQ,KAAK,CAAE,KAAK,OACrD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAK,MAAM,cAAc,MAAO,EAAQ,KAAK,CAAE,KAAK,OACrD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAK,MAAM,iBAAiB,MAAO,EAAQ,QAAQ,CAAE,KAAK,UAI/D,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,MAAO,CAAE,aAAc,EAAG,WAAG,kBAEjC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oBACX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2BACX,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,sBAAa,iBAC7B,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,sBAAa,EAAQ,MAAM,CAAC,qBAEhD,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,MAAO,CAAE,QAAS,EAAG,WACtB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAU,CAAA,CAAC,QAAS,EAAS,MAAM,QAAQ,QAAQ,QAAQ,MAAM,0BAI1E,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,OAAO,MAAO,CAAE,oBAAqB,UAAW,aAAc,EAAG,YAC5E,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,UAAU,MAAO,CAAE,aAAc,CAAE,YAC9C,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,0BACX,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,sBAAa,mBAEjC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,MAAO,CAAE,QAAS,EAAG,WACtB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAU,CAAA,CAAC,QAAS,EAAS,MAAM,QAAQ,QAAQ,QAAQ,MAAM,0BAG1E,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,UAAU,MAAO,CAAE,aAAc,CAAE,YAC9C,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,0BACX,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,sBAAa,sBAEjC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,MAAO,CAAE,QAAS,EAAG,WACtB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAU,CAAA,CAAC,QAAS,EAAS,MAAM,WAAW,QAAQ,WAAW,MAAM,mCA9D3E,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,YAAY,MAAO,CAAE,QAAS,EAAG,WAAG,sBAsE5E,CAEA,SAAS,EAAK,OAAE,CAAK,OAAE,CAAK,MAAE,CAAI,CAAE,EAChC,MACI,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,gBACX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,yBACX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,MAAO,CAAE,QAAS,OAAQ,eAAgB,gBAAiB,WAAY,QAAS,YACjF,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,sBAAc,IAC9B,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,MAAO,CAAE,SAAU,EAAG,WAAI,OAEpC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,sBAAc,EAAQ,EAAM,cAAc,GAAK,QAI5E,CAEO,eAAe,IAClB,IAAM,EAAU,EAAA,OAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,GAAI,QACnC,EAAc,EAAA,OAAI,CAAC,IAAI,CAAC,EAAS,gBACnC,EAAU,EAAE,CAChB,GAAI,CACA,EAAU,KAAK,KAAK,CAAC,EAAA,OAAE,CAAC,YAAY,CAAC,EAAa,QACtD,CAAE,MAAO,EAAG,CAAE,CAQd,MAAO,CAAE,MAJK,CAAC,CADA,EAAQ,MAAM,CAAG,EAAI,CAAO,CAAC,EAAQ,MAAM,CAAG,EAAE,CAAG,CAAE,SAAU,EAAE,CAAC,EAC3D,QAAQ,EAAI,EAAE,AAAF,EAAI,GAAG,CAAC,IAAY,CAClD,KADiD,EACzC,CAAE,GAAI,EAAQ,EAAE,CAAC,QAAQ,EAAG,EACxC,CAAC,EAEe,SAAU,UAAW,CACzC,CAEO,eAAe,EAAe,CAAE,QAAM,CAAE,EAC3C,IAAM,EAAU,EAAA,OAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,GAAI,QACnC,EAAc,EAAA,OAAI,CAAC,IAAI,CAAC,EAAS,gBACnC,EAAU,EAAE,CAChB,GAAI,CACA,EAAU,KAAK,KAAK,CAAC,EAAA,OAAE,CAAC,YAAY,CAAC,EAAa,QACtD,CAAE,MAAO,EAAG,CAAE,CAEd,IAAM,EAAY,SAAS,EAAO,EAAE,EAG9B,EAAiB,EAAQ,MAAM,CAAG,EAAI,CAAO,CAAC,EAAQ,MAAM,CAAG,EAAE,CAAG,CAAC,EACrE,EAAU,CAAC,EAAe,QAAQ,EAAI,EAAA,AAAE,EAAE,IAAI,CAAC,GAAK,EAAE,EAAE,GAAK,IAAc,KAI3E,EAAiB,EAAQ,GAAG,CAAC,IAC/B,IAAM,EAAM,CAAC,EAAS,QAAQ,EAAI,EAAA,AAAE,EAAE,IAAI,CAAC,GAAK,EAAE,EAAE,GAAK,UACzD,AAAI,EACO,CACH,EAFC,QAEU,EAAS,SAAS,CAC7B,MAAO,EAAI,KAAK,CAChB,MAAO,EAAI,KAAK,CAChB,SAAU,EAAI,QAAQ,AAC1B,EAEG,IACX,GAAG,MAAM,CAAC,GAAiB,OAAT,GAElB,MAAO,CACH,MAAO,SACH,EACA,QAAS,EACT,gBAAiB,EAAe,SAAS,EAAI,IACjD,CACJ,CACJ,oJCnJA,IAAA,EAAiC,EAAA,CAAxBA,AAAwB,CAAA,MACjC,EAA0B,EAAyB,CAA1CC,AAA0C,CAAA,GAD1B,CAA0D,AAChC,EAEnD,EAFkB,AAEe,EAAA,CAHA,AAGA,AAAxBC,CAAwB,IAFP,AAEZ,EAGd,EAA0B,EAAqB,CAAA,CAAA,AAHzB,EAGVC,IACZ,EAAqC,EAAA,CAAA,CAAA,AAJJ,EAIrBC,EADc,EAI1B,EAAwC,EAAA,CAHnB,AAGmB,CAAA,EAA5BC,IACZ,EAA2B,EAAA,CAAA,AAAlBC,CAAkB,IADD,AAHW,IAIsC,CAAxD,QAAQ,EADa,8BAIzBJ,EAAAA,KAAAA,EAAMG,EAAU,WAAU,AAG5BE,EAAAA,CAAAA,EAAiBL,EAAAA,KAAAA,EAAMG,EAAU,kBAAiB,AAClDG,EAAAA,CAAAA,EAAiBN,EAAAA,KAAAA,EAAMG,EAAU,kBAAiB,AAClDI,EAAAA,CAAAA,EAAqBP,EAAAA,KAAAA,EAAMG,EAAU,sBAAqB,AAC1DK,EAAAA,CAAAA,EAASR,EAAAA,KAAAA,EAAMG,EAAU,UAAS,AAClCM,EAAAA,CAAAA,EAAkBT,EAAAA,KAAAA,EAAMG,EAAU,mBAAkB,AAGpDO,EAAAA,CAAAA,EAA0BV,EAAAA,KAAAA,EACrCG,EACA,2BACD,AACYQ,EAAAA,CAAAA,EAA0BX,EAAAA,KAAAA,EACrCG,EACA,2BACD,AACYS,EAAAA,CAAAA,EAA2BZ,EAAAA,KAAAA,EACtCG,EACA,4BACD,AACYU,EAAAA,CAAAA,EAA0Bb,EAAAA,KAAAA,EACrCG,EACA,2BACD,AACYW,EAAAA,CAAAA,EAA8Bd,EAAAA,KAAAA,EACzCG,EACA,+BACD,AAGYY,EAAc,IAAIjB,EAAAA,gBAAAA,CAAiB,CAC9CkB,WAAY,CACVC,KAAMlB,EAAAA,SAAAA,CAAUmB,KAAK,CACrBC,KAAM,aACNC,SAAU,aAEVC,WAAY,GACZC,SAAU,EACZ,EACAC,QAAqBG,CAAZF,EAAoC,KAC7CG,CADiBF,GAAG,AAA6B,CAA5BC,cAC0C,CAA3CF,EACpBK,MAD4BJ,GAAG,CAACG,CACpB,CAEVE,IAAK5B,EAAI6B,EAAAA,KAAO,CAChBC,SAAU/B,EAAS8B,AAJsC,OAItCA,AAAO,AAC5B,WACA5B,CACF,GAAE,AAEW8B,EAAAA,CAAAA,EAAU7B,EAAAA,UAAAA,EAAW,CAChC8B,QAAS,oBACT1B,WACAL,cACAY,iBACAT,iBACAD,qBACAE,CACF,GAAE","ignoreList":[1]}