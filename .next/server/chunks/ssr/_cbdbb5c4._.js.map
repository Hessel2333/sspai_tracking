{"version":3,"sources":["../../../../pages/index.jsx","../../../../node_modules/next/src/build/templates/pages.ts"],"sourcesContent":["import fs from 'fs';\nimport path from 'path';\nimport Head from 'next/head';\nimport Link from 'next/link';\nimport StatsChart from '../components/StatsChart';\nimport dayjs from 'dayjs';\n\nexport default function Home({ history, latest, latestTimestamp }) {\n    // latest.totals holds the aggregate\n    // latest.articles holds the array of articles\n\n    const totals = latest.totals || latest; // Fallback for old format if any\n\n    return (\n        <div className=\"min-h-screen\">\n            <Head>\n                <title>SSPAI Tracker</title>\n                <link rel=\"icon\" href=\"/favicon.ico\" />\n            </Head>\n\n            <main className=\"container\">\n                <header>\n                    <div>\n                        <h1>SSPAI Tracker</h1>\n                        <p className=\"subtitle\">\n                            Tracking <strong className=\"text-primary\">{totals.article_count || 0}</strong> articles.\n                            Last updated: {dayjs(latestTimestamp).format('YYYY-MM-DD HH:mm')}\n                        </p>\n                    </div>\n                    <a href=\"https://github.com/Hessel2333/sspai_tracking\" target=\"_blank\" className=\"article-link\" style={{ fontSize: 14 }}>\n                        GitHub â†—\n                    </a>\n                </header>\n\n                {/* --- Summary Cards --- */}\n                <div className=\"grid\">\n                    <Card title=\"Total Views\" value={totals.views || totals.total_views} icon=\"ðŸ‘€\" />\n                    <Card title=\"Total Likes\" value={totals.likes || totals.total_likes} icon=\"â¤ï¸\" />\n                    <Card title=\"Total Comments\" value={totals.comments || totals.total_comments} icon=\"ðŸ’¬\" />\n                </div>\n\n                {/* --- Chart --- */}\n                <div className=\"section\">\n                    <div className=\"section-header\">\n                        <span className=\"card-title\">Total Views Trend</span>\n                    </div>\n                    <div style={{ padding: 24 }}>\n                        <StatsChart history={history} title=\"Total Views\" dataKey={Object.keys(totals).includes('views') ? 'totals.views' : 'total_views'} />\n                    </div>\n                </div>\n\n                {/* --- Article List --- */}\n                <div className=\"section\">\n                    <div className=\"section-header\">\n                        <h2>Tracked Articles</h2>\n                    </div>\n                    {latest.articles && latest.articles.length > 0 ? (\n                        <div style={{ overflowX: 'auto' }}>\n                            <table>\n                                <thead>\n                                    <tr>\n                                        <th>Title</th>\n                                        <th className=\"text-right\">Views</th>\n                                        <th className=\"text-right\">Likes</th>\n                                        <th className=\"text-right\">Comments</th>\n                                    </tr>\n                                </thead>\n                                <tbody>\n                                    {latest.articles.sort((a, b) => b.views - a.views).map(article => (\n                                        <tr key={article.id}>\n                                            <td>\n                                                <Link href={`/post/${article.id}`} className=\"article-link\">\n                                                    {article.title}\n                                                </Link>\n                                                <span className=\"meta-text\">{dayjs.unix(article.created_at).format('YYYY-MM-DD')}</span>\n                                            </td>\n                                            <td className=\"stat-cell\">{article.views.toLocaleString()}</td>\n                                            <td className=\"stat-cell\">{article.likes.toLocaleString()}</td>\n                                            <td className=\"stat-cell\">{article.comments.toLocaleString()}</td>\n                                        </tr>\n                                    ))}\n                                </tbody>\n                            </table>\n                        </div>\n                    ) : (\n                        <div style={{ padding: 24, textAlign: 'center', color: '#999' }}>No article details available yet.</div>\n                    )}\n                </div>\n            </main>\n        </div>\n    );\n}\n\nfunction Card({ title, value, icon }) {\n    return (\n        <div className=\"card\">\n            <div className=\"card-content\">\n                <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n                    <span className=\"card-title\">{title}</span>\n                    <span style={{ fontSize: 20 }}>{icon}</span>\n                </div>\n                <p className=\"card-value\">{value ? value.toLocaleString() : 0}</p>\n            </div>\n        </div>\n    );\n}\n\nexport async function getStaticProps() {\n    const dataDir = path.join(process.cwd(), 'data');\n    const historyPath = path.join(dataDir, 'history.json');\n\n    // Read history file at build time\n    let history = [];\n    try {\n        const fileContent = fs.readFileSync(historyPath, 'utf8');\n        history = JSON.parse(fileContent);\n    } catch (e) {\n        console.error('Error reading history file:', e);\n    }\n\n    const latest = history.length > 0 ? history[history.length - 1] : {};\n\n    return {\n        props: {\n            history,\n            latest,\n            latestTimestamp: latest.timestamp || null,\n        },\n        // Add revalidate if you want ISR, but for this git-trigger model, simple SSG is fine.\n    };\n}\n","import { PagesRouteModule } from '../../server/route-modules/pages/module.compiled'\nimport { RouteKind } from '../../server/route-kind'\n\nimport { hoist } from './helpers'\n\n// Import the app and document modules.\nimport * as document from 'VAR_MODULE_DOCUMENT'\nimport * as app from 'VAR_MODULE_APP'\n\n// Import the userland code.\nimport * as userland from 'VAR_USERLAND'\nimport { getHandler } from '../../server/route-modules/pages/pages-handler'\n\n// Re-export the component (should be the default export).\nexport default hoist(userland, 'default')\n\n// Re-export methods.\nexport const getStaticProps = hoist(userland, 'getStaticProps')\nexport const getStaticPaths = hoist(userland, 'getStaticPaths')\nexport const getServerSideProps = hoist(userland, 'getServerSideProps')\nexport const config = hoist(userland, 'config')\nexport const reportWebVitals = hoist(userland, 'reportWebVitals')\n\n// Re-export legacy methods.\nexport const unstable_getStaticProps = hoist(\n  userland,\n  'unstable_getStaticProps'\n)\nexport const unstable_getStaticPaths = hoist(\n  userland,\n  'unstable_getStaticPaths'\n)\nexport const unstable_getStaticParams = hoist(\n  userland,\n  'unstable_getStaticParams'\n)\nexport const unstable_getServerProps = hoist(\n  userland,\n  'unstable_getServerProps'\n)\nexport const unstable_getServerSideProps = hoist(\n  userland,\n  'unstable_getServerSideProps'\n)\n\n// Create and export the route module that will be consumed.\nexport const routeModule = new PagesRouteModule({\n  definition: {\n    kind: RouteKind.PAGES,\n    page: 'VAR_DEFINITION_PAGE',\n    pathname: 'VAR_DEFINITION_PATHNAME',\n    // The following aren't used in production.\n    bundlePath: '',\n    filename: '',\n  },\n  distDir: process.env.__NEXT_RELATIVE_DIST_DIR || '',\n  relativeProjectDir: process.env.__NEXT_RELATIVE_PROJECT_DIR || '',\n  components: {\n    // default export might not exist when optimized for data only\n    App: app.default,\n    Document: document.default,\n  },\n  userland,\n})\n\nexport const handler = getHandler({\n  srcPage: 'VAR_DEFINITION_PAGE',\n  config,\n  userland,\n  routeModule,\n  getStaticPaths,\n  getStaticProps,\n  getServerSideProps,\n})\n"],"names":["PagesRouteModule","RouteKind","hoist","document","app","userland","getHandler","getStaticProps","getStaticPaths","getServerSideProps","config","reportWebVitals","unstable_getStaticProps","unstable_getStaticPaths","unstable_getStaticParams","unstable_getServerProps","unstable_getServerSideProps","routeModule","definition","kind","PAGES","page","pathname","bundlePath","filename","distDir","process","env","__NEXT_RELATIVE_DIST_DIR","relativeProjectDir","__NEXT_RELATIVE_PROJECT_DIR","components","App","default","Document","handler","srcPage"],"mappings":"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","ignoreList":[1]}